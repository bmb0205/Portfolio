{"version":3,"sources":["tabs/tabs.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAS;AAAU;;AACV;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;wBAII,iBAFZ,gBAAgB,SAAhB,WACA,OAAO,OAAP,EAAgB,SAAhB,WAEE,oBACA,oBACA;AAED,iBALW,MAKX,CAAY,OAAZ,EAAqB,SAArB,EAAgC;gCALrB,QAKqB;;;;;;;;AAC9B,eAAK,OAAL,GAAe,OAAf,CAD8B;AAE9B,eAAK,SAAL,GAAiB,SAAjB,CAF8B;AAG9B,eAAK,oBAAL,GAA4B,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAA5B,CAH8B;AAI9B,eAAK,gBAAL,GAAwB,IAAI,gBAAJ,CAAqB,KAAK,OAAL,CAA7C,CAJ8B;AAK9B,eAAK,oBAAL,GAA4B,EAA5B,CAL8B;SAAhC;;AALW,yBAaX,+BAAW;;;AACT,eAAK,gBAAL,CAAsB,UAAtB,CAAiC,MAAjC,EADS;;AAGT,cAAI,WAAW,KAAK,OAAL,CAAa,gBAAb,CAA8B,IAA9B,CAAX,CAHK;AAIT,aAAG,OAAH,CAAW,IAAX,CAAgB,QAAhB,EAA0B,iBAAS;AACjC,gBAAI,SAAS,IAAI,gBAAJ,CAAqB,KAArB,CAAT,CAD6B;AAEjC,mBAAO,UAAP,CAAkB,CAAC,KAAD,EAAQ,cAAR,CAAlB,EAFiC;AAGjC,kBAAK,oBAAL,CAA0B,IAA1B,CAA+B,MAA/B,EAHiC;WAAT,CAA1B,CAJS;;AAUT,cAAM,OAAO,IAAP,CAVG;AAWT,YAAE,KAAK,OAAL,CAAF,CAAgB,IAAhB,CAAqB;AACnB,oBAAQ,gBAAS,aAAT,EAAwB;AAC9B,kBAAI,KAAK,MAAL,EAAa;AACf,qBAAK,MAAL,CAAY,EAAE,SAAS,aAAT,EAAd,EADe;eAAjB;aADM;WADV,EAXS;AAkBT,cAAI,eAAe,KAAK,OAAL,CAAa,gBAAb,CAA8B,MAA9B,CAAf,CAlBK;AAmBT,aAAG,OAAH,CAAW,IAAX,CAAgB,YAAhB,EAA8B,aAAK;AACjC,cAAE,gBAAF,CAAmB,OAAnB,EAA4B,MAAK,oBAAL,CAA5B,CADiC;WAAL,CAA9B,CAnBS;;;AAbA,yBAqCX,+BAAW;;;AACT,eAAK,gBAAL,CAAsB,aAAtB,CAAoC,MAApC,EADS;;AAKT,eAAK,oBAAL,CAA0B,OAA1B,CAAkC,kBAAU;AAC1C,mBAAO,aAAP,CAAqB,KAArB,EAD0C;WAAV,CAAlC,CALS;AAQT,eAAK,oBAAL,GAA4B,EAA5B,CARS;AAST,cAAI,eAAe,KAAK,OAAL,CAAa,gBAAb,CAA8B,MAA9B,CAAf,CATK;AAUT,aAAG,OAAH,CAAW,IAAX,CAAgB,YAAhB,EAA8B,aAAK;AACjC,cAAE,mBAAF,CAAsB,OAAtB,EAA+B,OAAK,oBAAL,CAA/B,CADiC;WAAL,CAA9B,CAVS;;;AArCA,yBAoDX,qCAAa,UAAU;AACrB,cAAI,QAAJ,EAAc;AACZ,iBAAK,gBAAL,CAAsB,UAAtB,CAAiC,kBAAjC,EADY;WAAd,MAEO;AACL,iBAAK,gBAAL,CAAsB,aAAtB,CAAoC,kBAApC,EADK;WAFP;;;AArDS,yBA4DX,iDAAmB,UAAU;AAC3B,cAAI,QAAJ,EAAc;AACZ,iBAAK,gBAAL,CAAsB,UAAtB,CAAiC,kBAAjC,EADY;WAAd,MAEO;AACL,iBAAK,gBAAL,CAAsB,aAAtB,CAAoC,kBAApC,EADK;WAFP;;;AA7DS,yBAoEX,qDAAqB,GAAG;AACtB,cAAI,OAAO,EAAE,MAAF,CAAS,YAAT,CAAsB,MAAtB,CAAP,CADkB;AAEtB,+BAAqB,KAAK,OAAL,EAAc,UAAnC,EAA+C,IAA/C,EAFsB;;;AApEb,yBAyEX,+BAAU,IAAI;AACZ,YAAE,KAAK,OAAL,CAAF,CAAgB,IAAhB,CAAqB,YAArB,EAAmC,EAAnC,EADY;AAEZ,eAAK,oBAAL,CAA0B;AACxB,oBAAQ,EAAE,cAAc;6BAAU;eAAV,EAAxB;WADF,EAFY;;;qBAzEH;;8BAiFO;AAChB,gBAAI,WAAW,KAAK,OAAL,CAAa,gBAAb,CAA8B,UAA9B,CAAX,CADY;AAEhB,gBAAI,QAAQ,CAAC,CAAD,CAFI;AAGhB,gBAAI,OAAO,IAAP,CAHY;AAIhB,eAAG,OAAH,CAAW,IAAX,CAAgB,QAAhB,EAA0B,UAAC,CAAD,EAAI,CAAJ,EAAU;AAClC,kBAAI,EAAE,SAAF,CAAY,QAAZ,CAAqB,QAArB,CAAJ,EAAoC;AAClC,wBAAQ,CAAR,CADkC;AAElC,uBAAO,EAAE,IAAF,CAF2B;AAGlC,uBAHkC;eAApC;aADwB,CAA1B,CAJgB;AAWhB,mBAAO,EAAE,UAAF,EAAQ,YAAR,EAAP,CAXgB;;;;eAjFP;;;;iBACS;;;;;iBACC;;;;;iBACK","file":"tabs/tabs.js","sourceRoot":"/source/","sourcesContent":["import { bindable, customAttribute } from 'aurelia-templating';\nimport { inject } from 'aurelia-dependency-injection';\nimport { TaskQueue } from 'aurelia-task-queue';\nimport { fireMaterializeEvent } from '../common/events';\nimport { AttributeManager } from '../common/attributeManager';\n\n@customAttribute('md-tabs')\n@inject(Element, TaskQueue)\nexport class MdTabs {\n  @bindable() fixed = false;\n  @bindable() onShow = null;\n  @bindable() transparent = false;\n\n  constructor(element, taskQueue) {\n    this.element = element;\n    this.taskQueue = taskQueue;\n    this.fireTabSelectedEvent = this.fireTabSelectedEvent.bind(this);\n    this.attributeManager = new AttributeManager(this.element);\n    this.tabAttributeManagers = [];\n  }\n\n  attached() {\n    this.attributeManager.addClasses('tabs');\n\n    let children = this.element.querySelectorAll('li');\n    [].forEach.call(children, child => {\n      let setter = new AttributeManager(child);\n      setter.addClasses(['tab', 'primary-text']);\n      this.tabAttributeManagers.push(setter);\n    });\n\n    const self = this;\n    $(this.element).tabs({\n      onShow: function(jQueryElement) {\n        if (self.onShow) {\n          self.onShow({ element: jQueryElement});\n        }\n      }\n    });\n    let childAnchors = this.element.querySelectorAll('li a');\n    [].forEach.call(childAnchors, a => {\n      a.addEventListener('click', this.fireTabSelectedEvent);\n    });\n  }\n\n  detached() {\n    this.attributeManager.removeClasses('tabs');\n\n    // no destroy handler in tabs\n\n    this.tabAttributeManagers.forEach(setter => {\n      setter.removeClasses('tab');\n    });\n    this.tabAttributeManagers = [];\n    let childAnchors = this.element.querySelectorAll('li a');\n    [].forEach.call(childAnchors, a => {\n      a.removeEventListener('click', this.fireTabSelectedEvent);\n    });\n  }\n\n  fixedChanged(newValue) {\n    if (newValue) {\n      this.attributeManager.addClasses('tabs-fixed-width');\n    } else {\n      this.attributeManager.removeClasses('tabs-fixed-width');\n    }\n  }\n\n  transparentChanged(newValue) {\n    if (newValue) {\n      this.attributeManager.addClasses('tabs-transparent');\n    } else {\n      this.attributeManager.removeClasses('tabs-transparent');\n    }\n  }\n\n  fireTabSelectedEvent(e) {\n    let href = e.target.getAttribute('href');\n    fireMaterializeEvent(this.element, 'selected', href);\n  }\n\n  selectTab(id) {\n    $(this.element).tabs('select_tab', id);\n    this.fireTabSelectedEvent({\n      target: { getAttribute: () => `#${id}` }\n    });\n  }\n\n  // FIXME: probably bad - binding this introduces dirty checking\n  get selectedTab() {\n    let children = this.element.querySelectorAll('li.tab a');\n    let index = -1;\n    let href = null;\n    [].forEach.call(children, (a, i) => {\n      if (a.classList.contains('active')) {\n        index = i;\n        href = a.href;\n        return;\n      }\n    });\n    return { href, index };\n  }\n}\n"]}