{"version":3,"sources":["validation/validationRenderer.js"],"names":[],"mappings":";;;;;;;;;;;;;;mDAAa;;;;eAEX,YAAY;eACZ,iBAAiB;;;AAHN,oDAKX,yBAAO,aAAa;AAClB,+BAAiC,YAAY,QAAZ,8GAAjC,IAAuD;;;;;;;;;;;;;gBAA5C,sBAA4C;gBAApC,0BAAoC;;AACrD,kCAAoB,6HAApB,IAA8B;;;;;;;;;;;;kBAArB,gBAAqB;;AAC5B,mBAAK,MAAL,CAAY,OAAZ,EAAqB,MAArB,EAD4B;aAA9B;WADF;AAKA,gCAAiC,YAAY,MAAZ,qHAAjC,IAAqD;;;;;;;;;;;;;gBAA1C,sBAA0C;gBAAlC,0BAAkC;;AACnD,kCAAoB,6HAApB,IAA8B;;;;;;;;;;;;kBAArB,iBAAqB;;AAC5B,mBAAK,GAAL,CAAS,QAAT,EAAkB,MAAlB,EAD4B;aAA9B;WADF;;;AAXS,oDAkBX,mBAAI,SAAS,QAAQ;AACnB,cAAI,OAAO,KAAP,EAAc;AAChB,mBADgB;WAAlB;AAGA,kBAAQ,QAAQ,OAAR;AACR,iBAAK,UAAL;AAAiB;AACf,oBAAI,QAAQ,QAAQ,aAAR,CAAsB,OAAtB,CAAR,CADW;AAEf,oBAAI,QAAQ,QAAQ,aAAR,CAAsB,OAAtB,KAAkC,QAAQ,aAAR,CAAsB,UAAtB,CAAlC,CAFG;AAGf,oBAAI,KAAJ,EAAW;AACT,wBAAM,eAAN,CAAsB,YAAtB,EADS;iBAAX;AAGA,oBAAI,KAAJ,EAAW;AACT,wBAAM,SAAN,CAAgB,MAAhB,CAAuB,OAAvB,EADS;AAET,wBAAM,SAAN,CAAgB,GAAhB,CAAoB,SAApB,EAFS;AAGT,yBAAO,MAAP,GAAgB,KAAhB,CAHS;AAIT,sBAAI,MAAM,YAAN,CAAmB,qBAAnB,CAAJ,EAA+C;AAC7C,yBAAK,UAAL,CAAgB,OAAhB,EAAyB,MAAzB,EAD6C;mBAA/C;iBAJF;AAQA,sBAde;eAAjB;AADA,iBAiBK,QAAL;AAAe;AACb,oBAAM,gBAAgB,QAAQ,OAAR,CAAgB,iBAAhB,CAAhB,CADO;AAEb,oBAAI,CAAC,aAAD,EAAgB;AAClB,yBADkB;iBAApB;AAGA,oBAAI,SAAQ,cAAc,aAAd,CAA4B,OAA5B,CAAR,CALS;AAMb,oBAAI,MAAJ,EAAW;AACT,yBAAM,SAAN,CAAgB,MAAhB,CAAuB,OAAvB,EADS;AAET,yBAAM,SAAN,CAAgB,GAAhB,CAAoB,SAApB,EAFS;AAGT,yBAAO,MAAP,GAAgB,MAAhB,CAHS;AAIT,sBAAI,EAAE,OAAM,YAAN,CAAmB,qBAAnB,KACF,OAAM,YAAN,CAAmB,qBAAnB,MAA8C,OAA9C,CADA,EACwD;AAC1D,yBAAK,UAAL,CAAgB,aAAhB,EAA+B,MAA/B,EAD0D;mBAD5D;iBAJF;AASA,sBAfa;eAAf;AAjBA,iBAkCK,OAAL;AAAe;AACb,oBAAI,QAAQ,YAAR,CAAqB,eAArB,CAAJ,EAA2C;AACzC,0BAAQ,SAAR,CAAkB,MAAlB,CAAyB,OAAzB,EADyC;AAEzC,0BAAQ,SAAR,CAAkB,GAAlB,CAAsB,SAAtB,EAFyC;AAGzC,sBAAI,EAAE,QAAQ,YAAR,CAAqB,qBAArB,KACF,QAAQ,YAAR,CAAqB,qBAArB,MAAgD,OAAhD,CADA,EAC0D;AAC5D,yBAAK,UAAL,CAAgB,QAAQ,UAAR,EAAoB,MAApC,EAD4D;mBAD9D;iBAHF;AAQA,sBATa;eAAf;AAlCA;AA6CS,oBAAT;AA7CA,WAJmB;;;AAlBV,oDAuEX,yBAAO,SAAS,QAAQ;AACtB,cAAI,OAAO,KAAP,EAAc;AAChB,mBADgB;WAAlB;AAGA,kBAAQ,QAAQ,OAAR;AACR,iBAAK,UAAL;AAAiB;AACf,qBAAK,aAAL,CAAmB,OAAnB,EAA4B,MAA5B,EADe;;AAGf,oBAAI,QAAQ,QAAQ,aAAR,CAAsB,OAAtB,KAAkC,QAAQ,aAAR,CAAsB,UAAtB,CAAlC,CAHG;AAIf,oBAAI,SAAS,QAAQ,gBAAR,CAAyB,MAAM,KAAK,SAAL,CAA/B,CAA+C,MAA/C,KAA0D,CAA1D,EAA6D;AACxE,wBAAM,SAAN,CAAgB,MAAhB,CAAuB,SAAvB,EADwE;AAExE,wBAAM,SAAN,CAAgB,GAAhB,CAAoB,OAApB,EAFwE;iBAA1E;AAIA,sBARe;eAAjB;AADA,iBAWK,QAAL;AAAe;AACb,oBAAM,gBAAgB,QAAQ,OAAR,CAAgB,iBAAhB,CAAhB,CADO;AAEb,oBAAI,CAAC,aAAD,EAAgB;AAClB,yBADkB;iBAApB;;AAIA,oBAAI,EAAE,cAAc,aAAd,CAAF,CAA+B,QAA/B,GAA0C,QAA1C,CAAmD,qBAAnD,CAAJ,EAAgF;AAC9E,uBAAK,aAAL,CAAmB,cAAc,aAAd,EAA6B,MAAhD,EAD8E;iBAAhF,MAEO;AACL,uBAAK,aAAL,CAAmB,aAAnB,EAAkC,MAAlC,EADK;iBAFP;;AAMA,oBAAI,UAAQ,cAAc,aAAd,CAA4B,OAA5B,CAAR,CAZS;AAab,oBAAI,WAAS,cAAc,gBAAd,CAA+B,MAAM,KAAK,SAAL,CAArC,CAAqD,MAArD,KAAgE,CAAhE,EAAmE;AAC9E,0BAAM,SAAN,CAAgB,MAAhB,CAAuB,SAAvB,EAD8E;AAE9E,0BAAM,SAAN,CAAgB,GAAhB,CAAoB,OAApB,EAF8E;iBAAhF;AAIA,sBAjBa;eAAf;AAXA,iBA8BK,OAAL;AAAe;AACb,oBAAI,QAAQ,YAAR,CAAqB,eAArB,CAAJ,EAA2C;AACzC,uBAAK,aAAL,CAAmB,QAAQ,UAAR,EAAoB,MAAvC,EADyC;AAEzC,sBAAI,WAAW,QAAQ,UAAR,CAAmB,gBAAnB,CAAoC,MAAM,KAAK,SAAL,CAA1C,CAA0D,MAA1D,KAAqE,CAArE,EAAwE;AACrF,4BAAQ,SAAR,CAAkB,MAAlB,CAAyB,SAAzB,EADqF;AAErF,4BAAQ,SAAR,CAAkB,GAAlB,CAAsB,OAAtB,EAFqF;mBAAvF;iBAFF;AAOA,sBARa;eAAf;AA9BA;AAwCS,oBAAT;AAxCA,WAJsB;;;AAvEb,oDAuHX,iCAAW,SAAS,QAAQ;AAC1B,cAAI,UAAU,SAAS,aAAT,CAAuB,KAAvB,CAAV,CADsB;AAE1B,kBAAQ,EAAR,4BAAoC,OAAO,EAAP,CAFV;AAG1B,kBAAQ,WAAR,GAAsB,OAAO,OAAP,CAHI;AAI1B,kBAAQ,SAAR,GAAoB,KAAK,SAAL,CAJM;AAK1B,cAAI,QAAQ,gBAAR,CAAyB,MAAM,KAAK,SAAL,CAA/B,CAA+C,MAA/C,KAA0D,CAA1D,EAA6D;AAC/D,oBAAQ,SAAR,IAAqB,MAAM,KAAK,cAAL,CADoC;WAAjE;AAGA,kBAAQ,KAAR,CAAc,OAAd,GAAwB,CAAxB,CAR0B;AAS1B,kBAAQ,WAAR,CAAoB,OAApB,EAA6B,QAAQ,WAAR,CAA7B,CAT0B;AAU1B,iBAAO,gBAAP,CAAwB,OAAxB,EAAiC,OAAjC,CAV0B;AAW1B,kBAAQ,KAAR,CAAc,OAAd,GAAwB,CAAxB,CAX0B;;;AAvHjB,oDAqIX,uCAAc,SAAS,QAAQ;AAC7B,cAAI,UAAU,QAAQ,aAAR,2BAA8C,OAAO,EAAP,CAAxD,CADyB;AAE7B,cAAI,OAAJ,EAAa;AACX,oBAAQ,WAAR,CAAoB,OAApB,EADW;WAAb;;;eAvIS","file":"validation/validationRenderer.js","sourceRoot":"/source/","sourcesContent":["export class MaterializeFormValidationRenderer {\n\n  className = 'md-input-validation';\n  classNameFirst = 'md-input-validation-first';\n\n  render(instruction) {\n    for (let { result, elements } of instruction.unrender) {\n      for (let element of elements) {\n        this.remove(element, result);\n      }\n    }\n    for (let { result, elements } of instruction.render) {\n      for (let element of elements) {\n        this.add(element, result);\n      }\n    }\n  }\n\n  add(element, result) {\n    if (result.valid) {\n      return;\n    }\n    switch (element.tagName) {\n    case 'MD-INPUT': {\n      let label = element.querySelector('label');\n      let input = element.querySelector('input') || element.querySelector('textarea');\n      if (label) {\n        label.removeAttribute('data-error');\n      }\n      if (input) {\n        input.classList.remove('valid');\n        input.classList.add('invalid');\n        result.target = input;\n        if (input.hasAttribute('data-show-errortext')) {\n          this.addMessage(element, result);\n        }\n      }\n      break;\n    }\n    case 'SELECT': {\n      const selectWrapper = element.closest('.select-wrapper');\n      if (!selectWrapper) {\n        return;\n      }\n      let input = selectWrapper.querySelector('input');\n      if (input) {\n        input.classList.remove('valid');\n        input.classList.add('invalid');\n        result.target = input;\n        if (!(input.hasAttribute('data-show-errortext') &&\n            input.getAttribute('data-show-errortext') === 'false')) {\n          this.addMessage(selectWrapper, result);\n        }\n      }\n      break;\n    }\n    case 'INPUT' : {\n      if (element.hasAttribute('md-datepicker')) {\n        element.classList.remove('valid');\n        element.classList.add('invalid');\n        if (!(element.hasAttribute('data-show-errortext') &&\n            element.getAttribute('data-show-errortext') === 'false')) {\n          this.addMessage(element.parentNode, result);\n        }\n      }\n      break;\n    }\n    default: break;\n    }\n  }\n\n  remove(element, result) {\n    if (result.valid) {\n      return;\n    }\n    switch (element.tagName) {\n    case 'MD-INPUT': {\n      this.removeMessage(element, result);\n\n      let input = element.querySelector('input') || element.querySelector('textarea');\n      if (input && element.querySelectorAll('.' + this.className).length === 0) {\n        input.classList.remove('invalid');\n        input.classList.add('valid');\n      }\n      break;\n    }\n    case 'SELECT': {\n      const selectWrapper = element.closest('.select-wrapper');\n      if (!selectWrapper) {\n        return;\n      }\n\n      if ($(selectWrapper.parentElement).children().hasClass('md-input-validation') ) {\n        this.removeMessage(selectWrapper.parentElement, result);\n      } else {\n        this.removeMessage(selectWrapper, result);\n      }\n\n      let input = selectWrapper.querySelector('input');\n      if (input && selectWrapper.querySelectorAll('.' + this.className).length === 0) {\n        input.classList.remove('invalid');\n        input.classList.add('valid');\n      }\n      break;\n    }\n    case 'INPUT' : {\n      if (element.hasAttribute('md-datepicker')) {\n        this.removeMessage(element.parentNode, result);\n        if (element && element.parentNode.querySelectorAll('.' + this.className).length === 0) {\n          element.classList.remove('invalid');\n          element.classList.add('valid');\n        }\n      }\n      break;\n    }\n    default: break;\n    }\n  }\n\n  addMessage(element, result) {\n    let message = document.createElement('div');\n    message.id = `md-input-validation-${result.id}`;\n    message.textContent = result.message;\n    message.className = this.className;\n    if (element.querySelectorAll('.' + this.className).length === 0) {\n      message.className += ' ' + this.classNameFirst;\n    }\n    message.style.opacity = 0;\n    element.appendChild(message, element.nextSibling);\n    window.getComputedStyle(message).opacity;\n    message.style.opacity = 1;\n  }\n\n  removeMessage(element, result) {\n    let message = element.querySelector(`#md-input-validation-${result.id}`);\n    if (message) {\n      element.removeChild(message);\n    }\n  }\n\n}\n"]}